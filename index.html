<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SaintClick Software</title>

<link rel="icon" type="image/png" href="SaintClick.png">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{
margin:0;
font-family:'Orbitron',sans-serif;
background:radial-gradient(circle at center,#0f172a 0%,#020617 100%);
color:white;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
opacity:0;                /* EMPIEZA OCULTO */
transition:opacity 1.5s ease; /* FADE SUAVE */
}

body.loaded{
opacity:1;                /* CUANDO CARGA */
}

.container{
background:rgba(15,23,42,0.9);
padding:50px;
border-radius:20px;
box-shadow:0 0 60px rgba(0,255,255,0.15);
width:500px;
text-align:center;
backdrop-filter:blur(10px);
}

.logo{
width:180px;
height:auto;
margin-bottom:30px;
filter:drop-shadow(0 0 30px rgba(0,242,255,0.5));
}

.title{
font-size:28px;
font-weight:700;
letter-spacing:2px;
margin-bottom:30px;
color:#00f2ff;
}

.count{
font-size:70px;
color:#00f2ff;
margin:20px 0;
}

ul{
list-style:none;
padding:0;
max-height:220px;
overflow-y:auto;
margin-top:20px;
}

li{
background:rgba(255,255,255,0.05);
margin:8px 0;
padding:12px;
border-radius:8px;
transition:0.2s;
}

li:hover{
background:rgba(0,255,255,0.15);
}
</style>
</head>

<body>

<div class="container">

<img src="SaintClick.png" class="logo" alt="SaintClick Logo">

<div class="title">SaintClick Software</div>

<div class="count" id="count">-</div>

<ul id="userList"></ul>

</div>

<script>
const API_URL = "https://saintclick-api.onrender.com/online";
let lastOnline = null;

async function fetchOnlineUsers(initialLoad = false){
    const countEl = document.getElementById("count");
    const listEl = document.getElementById("userList");

    try{
        const response = await fetch(API_URL,{cache:"no-store"});
        if(!response.ok) throw new Error();

        const data = await response.json();
        const usuarios = Array.isArray(data.usuarios)?data.usuarios:[];
        const online = typeof data.online==="number"?data.online:usuarios.length;

        lastOnline = online;
        countEl.innerText = online;

        listEl.innerHTML="";
        usuarios.forEach(u=>{
            const li=document.createElement("li");
            li.innerText=u;
            listEl.appendChild(li);
        });

        // Solo al cargar por primera vez hacemos fade-in
        if(initialLoad){
            document.body.classList.add("loaded");
        }

    }catch(err){
        countEl.innerText = lastOnline!==null?lastOnline:"-";
        if(initialLoad){
            document.body.classList.add("loaded");
        }
    }
}

// Primera carga con fade
fetchOnlineUsers(true);

// ActualizaciÃ³n cada 10s sin fade
setInterval(()=>fetchOnlineUsers(false),10000);
</script>

</body>
</html>
