<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

<title>SaintClick Software Online</title>

<link rel="icon" type="image/png" href="SaintClick.png">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" sizes="180x180" href="SaintClick.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="SaintClick">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#020617">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg0:#020617;
  --card: rgba(15,23,42,0.88);
  --card2: rgba(2,6,23,0.65);
  --text:#e2e8f0;
  --muted:#9aa7bd;
  --cyan:#00f2ff;
  --border: rgba(255,255,255,0.08);
  --radius: 26px;
}

html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  background: var(--bg0);
}

body{
  font-family:'Orbitron',sans-serif;
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  opacity:1;              /* ðŸ”¥ siempre visible */
  transition:none;        /* ðŸ”¥ sin fade */
  padding:
    max(16px, env(safe-area-inset-top))
    max(16px, env(safe-area-inset-right))
    max(16px, env(safe-area-inset-bottom))
    max(16px, env(safe-area-inset-left));
}

/* Fondo definitivo (sin cambio de tono) */
body::before{
  content:"";
  position:fixed;
  inset:-30%;
  z-index:-2;
  background:
    radial-gradient(circle at 50% 35%, rgba(0,242,255,0.18), transparent 55%),
    radial-gradient(circle at 50% 85%, rgba(124,58,237,0.08), transparent 55%),
    radial-gradient(circle at center, #0f172a 0%, #020617 60%, #010313 100%);
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  z-index:-1;
  pointer-events:none;
  opacity:.22;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.15'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

/* Contenedor */
.container{
  width: min(520px, 92vw);
  text-align:center;
  background: linear-gradient(180deg, var(--card), var(--card2));
  border-radius: var(--radius);
  padding: 38px 30px 28px;
  border: 1px solid var(--border);
  box-shadow:
    0 22px 60px rgba(0,0,0,0.55),
    0 0 70px rgba(0,242,255,0.10);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  position:relative;
  transition: filter .25s ease, transform .25s ease;
}

.container.blur{
  filter: blur(7px) saturate(0.95);
  transform: scale(0.99);
}

.logo{
  width: 160px;
  margin-bottom: 16px;
  filter: drop-shadow(0 0 28px rgba(0,242,255,0.40));
}

/* TITULOS */
.title{
  font-size: 24px;
  font-weight: 800;
  letter-spacing: 2px;
  color: var(--cyan);
  margin: 0 0 8px;
  text-shadow: 0 0 18px rgba(0,242,255,0.22);
}

.subtitle{
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 1.2px;
  color: var(--muted);
  margin: 0 0 14px;
}

/* CONTADOR */
.count{
  font-size: 64px;
  font-weight: 900;
  color: var(--cyan);
  margin: 6px 0 18px;
  text-shadow:
    0 0 22px rgba(0,242,255,0.35),
    0 0 70px rgba(0,242,255,0.12);
}

/* LISTA */
ul{
  list-style:none;
  padding:0;
  margin:0;
  max-height: 240px;
  overflow-y:auto;
}

ul::-webkit-scrollbar{ width: 8px; }
ul::-webkit-scrollbar-track{
  background: rgba(255,255,255,0.04);
  border-radius: 99px;
}
ul::-webkit-scrollbar-thumb{
  background: rgba(0,242,255,0.35);
  border-radius: 99px;
}

li{
  background: rgba(255,255,255,0.05);
  margin: 8px 0;
  padding: 12px 14px;
  border-radius: 14px;
  font-size: 14px;
  cursor:pointer;
  border: 1px solid rgba(255,255,255,0.06);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  transition: 0.18s ease;
}

li:hover{
  background: rgba(0,242,255,0.10);
  border-color: rgba(0,242,255,0.18);
}

/* OVERLAY */
.overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,0.62);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  opacity:0;
  pointer-events:none;
  transition: opacity 0.25s ease;
}
.overlay.active{
  opacity:1;
  pointer-events:auto;
}

.modal{
  width: min(760px, 94vw);
  text-align:center;
  background: linear-gradient(180deg, rgba(18,28,52,0.75), rgba(2,6,23,0.62));
  border-radius: 22px;
  padding: 26px 22px 22px;
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 30px 90px rgba(0,0,0,0.70),
    0 0 90px rgba(0,242,255,0.10);
  transform: scale(0.92) translateY(8px);
  transition: transform 0.25s ease;
}
.overlay.active .modal{
  transform: scale(1) translateY(0);
}

/* ðŸ”¥ PILL SIEMPRE EN UNA LINEA */
.overlay-pill{
  border-radius: 16px;
  padding: 14px 16px;
  background: linear-gradient(180deg, rgba(15,23,42,0.85), rgba(2,6,23,0.65));
  border: 1px solid rgba(255,255,255,0.10);
  font-family:'JetBrains Mono', monospace;
  font-size: clamp(14px, 2.1vw, 18px);
  color: #e2e8f0;

  white-space: nowrap;     /* ðŸ”¥ nunca parte */
  overflow-x: auto;        /* ðŸ”¥ scroll horizontal */
  overflow-y: hidden;
  text-overflow: ellipsis;
  scrollbar-width: none;
}
.overlay-pill::-webkit-scrollbar{
  display:none;
}

.mode-big{
  margin-top: 14px;
  font-size: 14px;
  color: var(--cyan);
  letter-spacing: 2px;
  text-transform: uppercase;
}
</style>
</head>

<body>

<div class="container" id="mainContainer">

  <img src="SaintClick.png" class="logo" alt="SaintClick">

  <div class="title">SaintClick Software</div>
  <div class="subtitle">Usuarios online</div>

  <div class="count" id="count">-</div>

  <ul id="userList"></ul>

</div>

<div class="overlay" id="overlay">
  <div class="modal">
    <div class="overlay-pill" id="overlayConfig"></div>
    <div class="mode-big" id="overlayMode"></div>
  </div>
</div>

<script>
const API_URL = "https://saintclick-api.onrender.com/online";
let lastOnline = null;

const overlay = document.getElementById("overlay");
const overlayConfig = document.getElementById("overlayConfig");
const overlayMode = document.getElementById("overlayMode");
const container = document.getElementById("mainContainer");

overlay.addEventListener("click", (e)=>{
  if(e.target !== overlay) return;
  overlay.classList.remove("active");
  container.classList.remove("blur");
});

document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape" && overlay.classList.contains("active")){
    overlay.classList.remove("active");
    container.classList.remove("blur");
  }
});

async function fetchOnlineUsers(){
  const countEl = document.getElementById("count");
  const listEl = document.getElementById("userList");

  try{
    const response = await fetch(API_URL, { cache:"no-store" });
    if(!response.ok) throw new Error();

    const data = await response.json();
    const usuarios = Array.isArray(data.usuarios) ? data.usuarios : [];
    const online = typeof data.online === "number" ? data.online : usuarios.length;

    lastOnline = online;
    countEl.innerText = online;
    listEl.innerHTML = "";

    usuarios.forEach(u=>{
      const li = document.createElement("li");
      li.textContent = (u.usuario || "").trim();

      li.addEventListener("click", ()=>{
        if(!u.config) return;

        const parts = String(u.config).split("  |  ");
        const mode = (parts[0] || "").trim();
        const config = (parts[1] || "").trim();

        overlayConfig.innerText = config || "(sin configuraciÃ³n)";
        overlayMode.innerText = mode || "";

        overlay.classList.add("active");
        container.classList.add("blur");
      });

      listEl.appendChild(li);
    });

  }catch(err){
    countEl.innerText = lastOnline !== null ? lastOnline : "-";
  }
}

fetchOnlineUsers();
setInterval(fetchOnlineUsers, 10000);
</script>

</body>
</html>
