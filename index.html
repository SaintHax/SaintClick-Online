<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">

<!-- Viewport optimizado iPhone -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

<title>SaintClick Software Online</title>

<!-- Icono navegador -->
<link rel="icon" type="image/png" href="SaintClick.png">

<!-- MANIFEST PARA WINDOWS / CHROME -->
<link rel="manifest" href="manifest.json">
    
<!-- Icono iPhone -->
<link rel="apple-touch-icon" sizes="180x180" href="SaintClick.png">

<!-- Activar modo app standalone -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="SaintClick">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Color sistema -->
<meta name="theme-color" content="#020617">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

<style>
html,body{
margin:0;
padding:0;
height:100%;
overflow:hidden;
}

body{
font-family:'Orbitron',sans-serif;
background:radial-gradient(circle at center,#0f172a 0%,#020617 100%);
color:white;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
opacity:0;
transition:opacity 1.5s ease;
-webkit-user-select:none;
-webkit-touch-callout:none;
overscroll-behavior:none;
}

body.loaded{
opacity:1;
}

.container{
background:rgba(15,23,42,0.9);
padding:40px;
border-radius:25px;
box-shadow:0 0 60px rgba(0,255,255,0.15);
width:90%;
max-width:500px;
text-align:center;
backdrop-filter:blur(15px);
overflow:hidden;
}

.logo{
width:160px;
height:auto;
margin-bottom:25px;
filter:drop-shadow(0 0 30px rgba(0,242,255,0.5));
}

.title{
font-size:24px;
font-weight:700;
letter-spacing:2px;
margin-bottom:20px;
color:#00f2ff;
}

.count{
font-size:60px;
color:#00f2ff;
margin:15px 0;
}

ul{
list-style:none;
padding:0;
max-height:220px;
overflow-y:auto;
margin-top:15px;
scrollbar-width:none;
}

ul::-webkit-scrollbar{
display:none;
}

li{
background:rgba(255,255,255,0.05);
margin:6px 0;
padding:10px;
border-radius:10px;
transition:0.2s;
font-size:14px;
}

li:hover{
background:rgba(0,255,255,0.15);
}
</style>
</head>

<body>

<div class="container">

<img src="SaintClick.png" class="logo" alt="SaintClick Logo">

<div class="title">SaintClick Software</div>

<div class="count" id="count">-</div>

<ul id="userList"></ul>

</div>

<script>
const API_URL = "https://saintclick-api.onrender.com/online";
let lastOnline = null;

async function fetchOnlineUsers(initialLoad = false){
    const countEl = document.getElementById("count");
    const listEl = document.getElementById("userList");

    try{
        const response = await fetch(API_URL,{cache:"no-store"});
        if(!response.ok) throw new Error();

        const data = await response.json();
        const usuarios = Array.isArray(data.usuarios)?data.usuarios:[];
        const online = typeof data.online==="number"?data.online:usuarios.length;

        lastOnline = online;
        countEl.innerText = online;

        listEl.innerHTML="";
        usuarios.forEach(u=>{
            const li=document.createElement("li");
            li.innerText=u;
            listEl.appendChild(li);
        });

        if(initialLoad){
            document.body.classList.add("loaded");
        }

    }catch(err){
        countEl.innerText = lastOnline!==null?lastOnline:"-";
        if(initialLoad){
            document.body.classList.add("loaded");
        }
    }
}

fetchOnlineUsers(true);
setInterval(()=>fetchOnlineUsers(false),10000);
</script>

</body>
</html>
